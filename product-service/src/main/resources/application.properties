# Quarkus Application Configuration
quarkus.application.name=product-service
quarkus.application.version=1.0.0-SNAPSHOT

# HTTP Server Configuration
quarkus.http.port=8081
quarkus.http.root-path=/api

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=product
quarkus.datasource.password=product
quarkus.datasource.jdbc.url=jdbc:postgresql://postgres-product:5432/productdb
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.table=flyway_schema_history

# Kafka Configuration
kafka.bootstrap.servers=kafka:29092
mp.messaging.incoming.inventory-updates.connector=smallrye-kafka
mp.messaging.incoming.inventory-updates.topic=inventory-updates
mp.messaging.incoming.inventory-updates.group.id=product-service-group
mp.messaging.incoming.inventory-updates.auto.offset.reset=earliest
mp.messaging.incoming.inventory-updates.value.deserializer=io.quarkus.kafka.client.serialization.JsonbDeserializer
mp.messaging.incoming.inventory-updates.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer

mp.messaging.outgoing.product-events.connector=smallrye-kafka
mp.messaging.outgoing.product-events.topic=product-events
mp.messaging.outgoing.product-events.value.serializer=io.quarkus.kafka.client.serialization.JsonbSerializer
mp.messaging.outgoing.product-events.key.serializer=org.apache.kafka.common.serialization.StringSerializer

# Service Discovery (Eureka - using Kubernetes service names or direct URLs)
# If running in Kubernetes, Quarkus can often discover services automatically.
# For local development or non-Kubernetes, configure direct URLs.
# Example: quarkus.rest-client."product-service".url=http://product-service:8081/api

# Distributed Tracing (OpenTelemetry)
quarkus.opentelemetry.tracer.sampler.parent-based.ratio=1.0
quarkus.opentelemetry.tracer.exporter.otlp.endpoint=http://zipkin:4317

# Health Check
quarkus.smallrye-health.root-path=/q/health

# Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics
quarkus.micrometer.binder.http-server.enabled=true

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.ecommerce".level=DEBUG
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE

# OpenAPI
quarkus.smallrye-openapi.path=/q/openapi
quarkus.swagger-ui.path=/q/swagger-ui
quarkus.swagger-ui.always-include=true

# Order Service URL (if needed for client calls from product-service)
order.service.url=http://order-service:8082/api
