# Quarkus Application Configuration
quarkus.application.name=order-service
quarkus.application.version=1.0.0-SNAPSHOT

# HTTP Server Configuration
quarkus.http.port=8082
quarkus.http.root-path=/api

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=order
quarkus.datasource.password=order
quarkus.datasource.jdbc.url=jdbc:postgresql://postgres-order:5432/orderdb
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.table=flyway_schema_history

# Kafka Configuration
kafka.bootstrap.servers=kafka:29092
mp.messaging.incoming.orders.connector=smallrye-kafka
mp.messaging.incoming.orders.topic=orders
mp.messaging.incoming.orders.group.id=order-service-group
mp.messaging.incoming.orders.auto.offset.reset=earliest
mp.messaging.incoming.orders.value.deserializer=io.quarkus.kafka.client.serialization.JsonbDeserializer
mp.messaging.incoming.orders.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.outgoing.order-events.connector=smallrye-kafka
mp.messaging.outgoing.order-events.topic=order-events
mp.messaging.outgoing.order-events.value.serializer=io.quarkus.kafka.client.serialization.JsonbSerializer
mp.messaging.outgoing.order-events.key.serializer=org.apache.kafka.common.serialization.StringSerializer

# New Kafka incoming channels
mp.messaging.incoming.payment-events.connector=smallrye-kafka
mp.messaging.incoming.payment-events.topic=payment-events
mp.messaging.incoming.payment-events.group.id=order-service-group
mp.messaging.incoming.payment-events.auto.offset.reset=earliest
mp.messaging.incoming.payment-events.value.deserializer=io.quarkus.kafka.client.serialization.JsonbDeserializer
mp.messaging.incoming.payment-events.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer

mp.messaging.incoming.inventory-events.connector=smallrye-kafka
mp.messaging.incoming.inventory-events.topic=inventory-events
mp.messaging.incoming.inventory-events.group.id=order-service-group
mp.messaging.incoming.inventory-events.auto.offset.reset=earliest
mp.messaging.incoming.inventory-events.value.deserializer=io.quarkus.kafka.client.serialization.JsonbDeserializer
mp.messaging.incoming.inventory-events.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer

# REST Client (Feign) Configuration
quarkus.rest-client.product-service.url=http://product-service:8080/api
org.eclipse.microprofile.rest.client.inject.product-service.connect-timeout=5000
org.eclipse.microprofile.rest.client.inject.product-service.read-timeout=5000

# Fault Tolerance (Circuit Breaker)
quarkus.fault-tolerance.circuit-breaker.productService.request-volume-threshold=10
quarkus.fault-tolerance.circuit-breaker.productService.failure-ratio=0.5
quarkus.fault-tolerance.circuit-breaker.productService.delay=5s

# Health Check
quarkus.smallrye-health.root-path=/actuator/health

# Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/actuator/prometheus
quarkus.micrometer.binder.http-server.enabled=true

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.ecommerce".level=DEBUG

# OpenAPI
quarkus.smallrye-openapi.path=/v3/api-docs
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.always-include=true
